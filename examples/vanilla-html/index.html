<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cognivo Demo - AI-Native Components</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f3f4f6;
      padding: 2rem;
      color: #1f2937;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 3rem;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      font-size: 1.125rem;
      color: #6b7280;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .demo-section {
      margin-bottom: 3rem;
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #1f2937;
    }

    .data-viz {
      padding: 1rem;
      background: white;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
    }

    .data-table th,
    .data-table td {
      padding: 0.5rem;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }

    .data-table th {
      font-weight: 600;
      color: #6b7280;
      font-size: 0.875rem;
    }

    .trend-up {
      color: #10b981;
    }

    .trend-down {
      color: #ef4444;
    }

    .api-key-input {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: white;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      max-width: 300px;
    }

    .api-key-input input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 0.875rem;
      font-family: monospace;
    }

    .api-key-input button {
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
      background: #8b5cf6;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
    }

    .api-key-input button:hover {
      background: #7c3aed;
    }

    .status {
      margin-top: 0.5rem;
      padding: 0.5rem;
      border-radius: 4px;
      font-size: 0.875rem;
    }

    .status.success {
      background: #d1fae5;
      color: #065f46;
    }

    .status.error {
      background: #fee2e2;
      color: #991b1b;
    }

    .theme-toggle {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      background: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      font-weight: 600;
    }

    [data-theme="dark"] {
      background: #1f2937;
      color: #f3f4f6;
    }

    [data-theme="dark"] .section-title {
      color: #f3f4f6;
    }

    [data-theme="dark"] .data-viz {
      background: #374151;
    }

    [data-theme="dark"] .data-table th,
    [data-theme="dark"] .data-table td {
      border-bottom-color: #4b5563;
    }

    [data-theme="dark"] .data-table th {
      color: #9ca3af;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Cognivo Demo</h1>
      <p class="subtitle">AI-Native Web Components for Intelligent Dashboards</p>
    </header>

    <div class="api-key-input">
      <label for="apiKey" style="display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.875rem;">
        OpenAI API Key:
      </label>
      <input
        type="password"
        id="apiKey"
        placeholder="sk-..."
      />
      <button onclick="initializeAI()">Connect AI</button>
      <div id="status"></div>
    </div>

    <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™ Toggle Dark Mode</button>

    <!-- Demo 1: Spending Analysis -->
    <div class="demo-section">
      <h2 class="section-title">Monthly Spending Analysis</h2>
      <ai-insight-card
        id="spending-card"
        title="Marketing Spend - Q1 2024"
        ai-actions='["explain", "forecast", "detect_anomaly"]'
      >
        <div class="data-viz">
          <table class="data-table">
            <thead>
              <tr>
                <th>Month</th>
                <th>Spending</th>
                <th>Change</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>January</td>
                <td>$1,200</td>
                <td class="trend-up">+5%</td>
              </tr>
              <tr>
                <td>February</td>
                <td>$1,450</td>
                <td class="trend-up">+21%</td>
              </tr>
              <tr>
                <td>March</td>
                <td>$2,800</td>
                <td class="trend-up">+93%</td>
              </tr>
              <tr>
                <td>April</td>
                <td>$1,350</td>
                <td class="trend-down">-52%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </ai-insight-card>
    </div>

    <!-- Demo 2: Component Showcase -->
    <div class="demo-section">
      <h2 class="section-title">Component Showcase</h2>
      <div class="grid">
        <div style="padding: 2rem; background: white; border-radius: 8px;">
          <h3 style="margin-bottom: 1rem;">Thinking Indicator</h3>
          <div style="display: flex; gap: 1rem; align-items: center;">
            <ai-thinking-indicator size="sm"></ai-thinking-indicator>
            <ai-thinking-indicator size="md"></ai-thinking-indicator>
            <ai-thinking-indicator size="lg"></ai-thinking-indicator>
          </div>
        </div>

        <div style="padding: 2rem; background: white; border-radius: 8px;">
          <h3 style="margin-bottom: 1rem;">Confidence Badges</h3>
          <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <ai-confidence-badge score="0.95" show-percentage></ai-confidence-badge>
            <ai-confidence-badge score="0.65" show-percentage></ai-confidence-badge>
            <ai-confidence-badge score="0.35" show-percentage></ai-confidence-badge>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    // Import components and adapters
    // In real usage, these would come from npm packages
    // import { AiInsightCard } from '@cognivo/components';
    // import { OpenAiClient } from '@cognivo/adapter-openai';

    // For this demo, we'll set up the data structure
    const spendingData = [
      { month: 'Jan', spending: 1200, change: 0.05 },
      { month: 'Feb', spending: 1450, change: 0.21 },
      { month: 'Mar', spending: 2800, change: 0.93 },
      { month: 'Apr', spending: 1350, change: -0.52 },
    ];

    // Store AI client globally
    window.aiClient = null;

    // Initialize AI client with API key
    window.initializeAI = async function() {
      const apiKey = document.getElementById('apiKey').value;
      const statusDiv = document.getElementById('status');

      if (!apiKey || !apiKey.startsWith('sk-')) {
        statusDiv.className = 'status error';
        statusDiv.textContent = 'Please enter a valid OpenAI API key';
        return;
      }

      try {
        // This would use the actual OpenAI client:
        // window.aiClient = new OpenAiClient({ apiKey });

        // For demo purposes, show success
        statusDiv.className = 'status success';
        statusDiv.textContent = 'âœ“ AI Connected! Try the Explain or Forecast buttons.';

        // Set up the card with data and client
        const card = document.getElementById('spending-card');
        if (card) {
          card.data = spendingData;
          card.aiClient = window.aiClient;
          card.meta = {
            timeframe: 'monthly',
            unit: 'USD',
            dataType: 'spending',
            category: 'Marketing'
          };

          // Listen for AI results
          card.addEventListener('ai:result', (e) => {
            console.log('AI Result:', e.detail.result);
          });

          card.addEventListener('ai:error', (e) => {
            console.error('AI Error:', e.detail.error);
          });
        }
      } catch (error) {
        statusDiv.className = 'status error';
        statusDiv.textContent = `Error: ${error.message}`;
      }
    };

    // Theme toggle
    window.toggleTheme = function() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', newTheme);
    };

    // Note: In production, you would actually import and use the components here
    console.log('Cognivo Demo Ready!');
    console.log('Add your OpenAI API key to enable AI features.');
  </script>
</body>
</html>
